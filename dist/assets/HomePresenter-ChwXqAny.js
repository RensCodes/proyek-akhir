function m(n,l,s,c,h){const r={_storyModel:n,_authModel:l,_homeView:s,_router:c,_mapService:h,async showStories(){this._homeView.renderLoading();try{const e=await this._storyModel.fetchStories(),a=this._authModel.getCurrentUserName();this._homeView.renderStories(e,a);const t=this._homeView.getMapContainerId(),o=e.filter(i=>i.lat&&i.lon);if(document.getElementById(t)&&o.length>0)this._mapService.initDisplayMap(t,o);else if(document.getElementById(t)){const i=document.getElementById(t);i&&(i.innerHTML='<p class="no-map-data-message">Peta akan muncul di sini jika ada cerita dengan data lokasi.</p>')}}catch(e){console.error("HomePresenter.showStories error:",e),this._homeView.renderError(e.message||"Gagal memuat cerita. Coba lagi nanti."),(e.message.toLowerCase().includes("token")||e.message.toLowerCase().includes("sesi")||e.status===401)&&(this._authModel.logout(),this._router.navigateTo("login"))}},handleViewOnMap({lat:e,lon:a,title:t}){if(console.log(`HomePresenter: Menampilkan lokasi untuk ${t} di peta: ${e}, ${a}`),this._mapService&&typeof this._mapService.panToLocation=="function"){this._mapService.panToLocation(e,a);const o=document.getElementById(this._homeView.getMapContainerId());o&&o.scrollIntoView({behavior:"smooth",block:"center"})}else console.warn("MapService atau panToLocation tidak tersedia di HomePresenter.")},navigateToAddStoryPage(){this._router.navigateTo("add-story")},destroy(){this._homeView&&typeof this._homeView.destroy=="function"&&this._homeView.destroy(),this._mapService&&typeof this._mapService.destroyDisplayMap=="function"&&this._mapService.destroyDisplayMap(),this._storyModel=null,this._authModel=null,this._homeView=null,this._router=null,this._mapService=null,console.log("HomePresenter instance (dari factory) dihancurkan.")}};return s.setPresenter(r),r}export{m as default};
