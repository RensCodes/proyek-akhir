function u(i,a,l,h){let s=0,t=[];const o={_storyModel:i,_view:a,_router:l,_utils:h,async showSavedStories(r=!0){this._view.renderLoading();try{r&&(s=0,t=await this._storyModel.getAllSavedStories(),t.sort((d,S)=>new Date(S.createdAt)-new Date(d.createdAt)));const e=t.slice(0,s+6),n=t.length>e.length;s=e.length,this._view.renderSavedStories(e,n)}catch(e){console.error("SavedStoriesPresenter.showSavedStories error:",e),this._view.renderError(e.message||"Gagal memuat cerita dari database lokal.")}},async handleDeleteStory(r){try{await this._storyModel.deleteSavedStory(r),t=t.filter(e=>e.id!==r),s=Math.min(s,t.length),this._utils.showMessage("Sukses","Cerita berhasil dihapus dari favorit."),this.showSavedStories(!1)}catch(e){console.error("handleDeleteStory error:",e),this._utils.showMessage("Error","Gagal menghapus cerita dari favorit.",!0)}},async handleDeleteAllStories(){try{await this._storyModel.clearAllSavedStories(),t=[],s=0,this._utils.showMessage("Sukses","Semua cerita favorit berhasil dihapus."),this.showSavedStories(!1)}catch(r){console.error("handleDeleteAllStories error:",r),this._utils.showMessage("Error","Gagal menghapus semua cerita favorit.",!0)}},loadMore(){this.showSavedStories(!1)},destroy(){var r,e;(e=(r=this._view)==null?void 0:r.destroy)==null||e.call(r),this._storyModel=null,this._view=null,this._router=null,this._utils=null,console.log("SavedStoriesPresenter instance dihancurkan.")}};return a.setPresenter(o),o}export{u as default};
